---
layout:     post
title:      beego搭建博客遇到的问题
subtitle:   beego踩坑集锦
date:       2019-08-13
author:     John Mactavish
header-img: img/post-bg-dog-lake.jpg
catalog: true
tags:
    - beego
    - golang
    
---
# 前言
&emsp;&emsp;我开始使用beego搭建个人博客了，简单看了beego的源码和快速入门，表示beego真是awesome。代码写得非常好，很值得学习。结合beego官方的开发文档和[示例项目](https://beego.me/products)开源代码学起来很舒服。但是还是踩了坑，特别写博客记录下来，持续更新。

# beego读取app.conf和bee run的应用名
## 起因
写modles模块的数据库，写了一小部分，进行单元测试时，显示
>register db `default`, sql: unknown driver "" (forgotten import?)

但是我的```sqlite3驱动```是已经导入了的。
>import _"github.com/mattn/go-sqlite3"
## 过程
判断是注册数据库时出的错，打印中间信息
>driverName := beego.AppConfig.String("driverName")
>fmt.Println(beego.AppConfig.String("appname"))
>orm.RegisterDriver(driverName, orm.DRSqlite)

输出为空，但是```配置文件app.conf```上确实写了
>driverName = sqlite3

改成
>driverName = "sqlite3"

无果，改为打印配置文件上原来就有的appname，仍然为空。证明```conf文件字符串不需要双引号```，同时说明是没有读取到配置文件。   

查看beego的config.go，它的init函数在工作目录或app目录查找app.conf并解析到AppConfig中。修改config.go来打印工作目录，显示为MyBlog/models目录。   

运行bee run，发现应用文件名为models，原来我的终端工作目录切换到了MyBlog/models目录。```bee run在应用的子目录时居然是用当前目录作为应用名。```同时程序试图在MyBlog/models/conf目录而非MyBlog/conf目录查找配置文件。终端切换到应用源代码根目录，问题解决。







# 参考
>[title](https://path)  
>[title](https://path)    

***  
>最后附上GitHub：<https://github.com/gonearewe>
